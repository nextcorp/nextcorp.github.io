<!DOCTYPE html>
<html>
	<head>
		<title>Lua and Virtual File System(VFS)</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="/img/favicon.png">
		<style>
			.tbl1 { 
				background: #ccc; 
				border: solid 0px black; 
				display: inline-block;
			}
			.code1 {
				background: #ccc;
				border: solid 0px black;
				display: inline-block;
				font-family: Consolas;
				font-size: 14px;
				text-align: left;
			}
			body {
				font-family: Calibri, Verdana, Serif;
				font-size: 20px;
				text-align: justify;
			}
			footer{
				font-size: 14px;
			}
		</style>
	</head>
	<body>
		<center> <a href="/index.html">go to home page</a> </center>
		<h2 align="center">Lua and VFS</h2>
		<h3>What is virtual file system?</h3>
		<p>
		A Virtual File System (VFS) or virtual filesystem switch is an abstraction layer on top of a more concrete file system. The purpose of a VFS is to allow client applications to access different types of concrete file systems in a uniform way. A VFS can, for example, be used to access local and network storage devices transparently without the client application noticing the difference.
		</p>
		<p>
		Sometimes Virtual File System refers to a file or a group of files (not necessarily inside a concrete file system) that acts as a manageable container which should provide the functionality of a concrete file system through the usage of software. 
		</p>
		<p>
		The primary benefit for this type of file system is that it is centralized and easy to remove. A single-file virtual file system may include all the basic features expected of any file system (virtual or otherwise), but access to the internal structure of these file systems is often limited to programs specifically written to make use of the single-file virtual file system (instead of implementation through a driver allowing universal access). Another major drawback is that performance is relatively low when compared to other virtual file systems. Low performance is mostly due to the cost of shuffling virtual files when data is written or deleted from the virtual file system.
		</p>
		<h3>What is VFile?</h3>
		<p>
			A library for Lua (API)
			Allows you to create temporary files in RAM.
		</p>
		
		<h3>Virtual file attributes</h3>
		
		<h4>File name</h4>
		<p>
		A filename (or file name) is used to identify a storage location in the file system. Most file systems have restrictions on the length of filenames. In some file systems, filenames are not case sensitive (i.e., the names MYFILE and myfile refer to the same file); in others, filenames are case sensitive (i.e., the names MYFILE, MyFile, and myfile refer to three separate files).
		In VFilefilename is case-sensetive.
		</p>
		
		<p>
		Most modern file systems allow filenames to contain a wide range of characters from the Unicode character set. However, they may have restrictions on the use of certain special characters, disallowing them within filenames; those characters might be used to indicate a device, device type, directory prefix, file path separator, or file type.
		In this API, there are no restrictions on the length of the file name and the characters that are in it.
		</p>
				
		<h4>File size</h4>
		<p>
		File size is a measure of how much data a file contains or, alternately, how much storage it consumes. File size is expressed in byte. 
		The maximum file size is 640 KB. (655360 bytes) (for VFile)
		</p>
		
		<h4>Last record size</h4>
		<p>
		This is the size of the data that was recorded at the very last moment. This parameter is required to measure the size of the file that was used in memory. Below is a simple function that defines this parameter.
		</p>
		
		<center>
		<div class="code1">
			test={"H","e","l","l","o"}<br>
			last_Rec_size=5<br>
		</div>
		</center>
		
		<p>
			Since some data has already been written, the value of this attribute is determined by the number 5 (byte). Let's create a function (in this library, a method) to change this value
		</p>
		
				<center>
					<div class="code1">
					function setRecSize(array, data)<br>
						&nbsp;currentLen = #array<br>
						&nbsp;newLen = #data<br>
						&nbsp;if newLen > currentLen then<br>
							&nbsp;&nbsp;last_Rec_size = newLen<br>
						&nbsp;end<br>
					end<br>
					</div>
				</center>
					
		<p>
			This function simply compares the current string length and the new argument string. If the length of the new argument exceeds the length of the old one, this value changes.
		</p>
		
		<h3>How to create file</h3>
		<p>
			Ð•o create an empty file in memory, call the function:
			<i>vfile:getFile(string:name, string:isReadOnly)</i>
			Each individual file is a separate object that has its own methods. This simplifies the interaction with several files.
		</p>
		
	<p>
		To <strong>write</strong> data to file, you can use obj:write(string:data) function:
		<i>obj:write("Hello!")</i>
	</p>
	
	<p>
		To <strong>read</strong> data from file, you can use obj:read() function:
		<i>local data = obj:read()</i>
	</p>
	
					<h3>All API Functions</h3>
					<center>
					<div class="tbl1">
					<table style="width:100%">
						<tr>
							<th>Function name</th>
							<th>What does</th>
							<th>Returns</th>
						</tr>
						<tr>
							<td>obj:read()</td>
							<td>Read whole file</td>
							<td>string: file data</td>
						</tr>
						<tr>
							<td>obj:write(string:data)</td>
							<td>Write data to file</td>
							<td>nothing</td>
						</tr>
						<tr>
							<td>obj:append(string:data)</td>
							<td>Write data to the end of file</td>
							<td>nothing</td>
						</tr>
						<tr>
													<td>obj:setmode(string:mode)</td>
							<td>Set file mode (ro/rw)</td>
							<td>nothing</td>
						</tr>
					</table>
					</div>
					</center>
	<hr>
	<footer>
		Copyright (C)N Corp. All rights reserved. Use for commercial purposes is prohibited. Copying without reference to the source is punishable.
	</footer>
	</body>
</html>